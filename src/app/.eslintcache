[{"/src/app/src/App.js":"1","/src/app/src/reportWebVitals.js":"2","/src/app/src/index.js":"3","/src/app/src/components/TodoForm/TodoForm.jsx":"4","/src/app/src/components/TodoList/TodoList.jsx":"5","/src/app/src/hooks/useTodos.js":"6","/src/app/src/constants/dummy_todos.js":"7"},{"size":1312,"mtime":1766050310531,"results":"8","hashOfConfig":"9"},{"size":362,"mtime":1766032447825,"results":"10","hashOfConfig":"9"},{"size":500,"mtime":1766032447825,"results":"11","hashOfConfig":"9"},{"size":1506,"mtime":1766050414927,"results":"12","hashOfConfig":"9"},{"size":2515,"mtime":1766054366128,"results":"13","hashOfConfig":"9"},{"size":4206,"mtime":1766047697766,"results":"14","hashOfConfig":"9"},{"size":36,"mtime":1766054733067,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1o8kym7",{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"28"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/src/app/src/App.js",[],"/src/app/src/reportWebVitals.js",[],"/src/app/src/index.js",[],"/src/app/src/components/TodoForm/TodoForm.jsx",[],"/src/app/src/components/TodoList/TodoList.jsx",[],"/src/app/src/hooks/useTodos.js",["31"],"import { useState, useEffect } from \"react\";\nimport { DUMMY_TODOS } from \"../constants/dummy_todos\";\n\nexport function useTodos(userId) {\n  const [todos, setTodos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const fetchTodos = async () => {\n    const trimmedUserId = userId?.trim();\n    if (!trimmedUserId) {\n      setError(\"Please enter a user ID to fetch todos.\");\n      setTodos(DUMMY_TODOS);\n      setLoading(false);\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await fetch(\"http://localhost:8000/todos/\", {\n        headers: {\n          \"X-User-ID\": trimmedUserId,\n        },\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || `HTTP ${response.status}`);\n      }\n\n      const data = await response.json();\n      setTodos(data.length > 0 ? data : DUMMY_TODOS);\n    } catch (err) {\n      console.warn(\"Fetch failed:\", err);\n      setError(\"Unable to connect to server. Showing demo data.\");\n      setTodos(DUMMY_TODOS);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchTodos();\n  }, [userId]);\n\n  const addTodo = async (description) => {\n    const trimmedUserId = userId?.trim();\n    if (!trimmedUserId) {\n      throw new Error(\"Please enter a user ID before adding todos.\");\n    }\n\n    try {\n      const response = await fetch(\"http://localhost:8000/todos/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-User-ID\": trimmedUserId,\n        },\n        body: JSON.stringify({ description }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || \"Failed to add todo\");\n      }\n\n      await fetchTodos(); \n    } catch (err) {\n      \n      const optimalTodo = {\n        _id: Date.now().toString(),\n        description,\n        completed: false,\n        user_id: trimmedUserId,\n      };\n      setTodos((prev) => [optimalTodo, ...prev]);\n      throw err; \n    }\n  };\n\n  const toggleTodoComplete = async (todoId, currentCompleted) => {\n    const trimmedUserId = userId?.trim();\n    if (!trimmedUserId) {\n      throw new Error(\"User ID is required\");\n    }\n\n\n    setTodos((prev) =>\n      prev.map((t) =>\n        t._id === todoId ? { ...t, completed: !currentCompleted } : t\n      )\n    );\n\n    try {\n      const response = await fetch(\"http://localhost:8000/todos/\", {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-User-ID\": trimmedUserId,\n        },\n        body: JSON.stringify({\n          id: todoId,\n          completed: !currentCompleted,\n        }),\n      });\n\n      if (!response.ok) {\n        const errData = await response.json().catch(() => ({}));\n        throw new Error(errData.error || \"Failed to update todo\");\n      }\n\n      const updatedTodo = await response.json();\n      setTodos((prev) =>\n        prev.map((t) => (t._id === updatedTodo._id ? updatedTodo : t))\n      );\n    } catch (err) {\n      setTodos((prev) =>\n        prev.map((t) =>\n          t._id === todoId ? { ...t, completed: currentCompleted } : t\n        )\n      );\n      throw err;\n    }\n  };\n\n  const deleteTodoById = async (todoId) => {\n    const trimmedUserId = userId?.trim();\n    if (!trimmedUserId) {\n      throw new Error(\"User ID is required\");\n    }\n\n    setTodos((prev) => prev.filter((t) => t._id !== todoId));\n\n    try {\n      const response = await fetch(\"http://localhost:8000/todos/\", {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-User-ID\": trimmedUserId,\n        },\n        body: JSON.stringify({ id: todoId }),\n      });\n\n      if (!response.ok) {\n        const errData = await response.json().catch(() => ({}));\n        throw new Error(errData.error || \"Failed to delete todo\");\n      }\n\n    } catch (err) {\n      await fetchTodos(); \n      throw err;\n    }\n  };\n\n  return {\n    todos,\n    loading,\n    error,\n    addTodo,\n    toggleTodoComplete,\n    deleteTodoById,\n    refetch: fetchTodos,\n  };\n}\n","/src/app/src/constants/dummy_todos.js",[],{"ruleId":"32","severity":1,"message":"33","line":45,"column":6,"nodeType":"34","endLine":45,"endColumn":14,"suggestions":"35"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchTodos'. Either include it or remove the dependency array.","ArrayExpression",["36"],{"desc":"37","fix":"38"},"Update the dependencies array to be: [fetchTodos, userId]",{"range":"39","text":"40"},[1231,1239],"[fetchTodos, userId]"]